<view class="container">
	<!-- ç©ºçŠ¶æ€è®¾è®¡ -->
	<view wx:if="{{apiOk && !orderList}}" class="no-order">
		<view class="empty-icon">â˜•</view>
		<view class="content-1">{{ $t.order.empty.t1 }}</view>
		<view class="content-2">{{ $t.order.empty.t2 }}</view>
		<view class="to-index-btn" bindtap="toIndexPage">
			<text class="btn-text">{{ $t.order.empty.btn }}</text>
		</view>
	</view>

	<!-- è®¢å•åˆ—è¡¨ -->
	<view wx:if="{{orderList}}" class="order-list">
		<view class="a-order" wx:for="{{orderList}}" wx:key="index">
			<!-- è®¢å•å¤´éƒ¨ï¼šåº—é“ºåç§° + è®¢å•çŠ¶æ€ -->
			<navigator url="/pages/order-details/index?id={{item.id}}" hover-class="order-hover">
				<view class="order-header">
					<view class="shop-info">
						<text class="shop-icon">ğŸª</text>
						<text class="shop-name">{{item.shopNameZt}}</text>
					</view>
					<view class="order-status {{item.status == 0 ? 'status-pending' : item.status == -1 ? 'status-cancel' : 'status-success'}}">
						<text class="status-text">{{item.statusStr}}</text>
						<text class="arrow">â€º</text>
					</view>
				</view>
			</navigator>

			<!-- å•†å“å›¾ç‰‡æ¨ªå‘æ»šåŠ¨ -->
			<scroll-view class="goods-scroll" scroll-x="true" show-scrollbar="{{false}}">
				<view class="goods-container">
					<view class="goods-item" wx:for="{{goodsMap[item.id]}}" wx:key="index" wx:for-item="goods">
						<image mode="aspectFill" src="{{goods.pic}}" class="goods-img"></image>
						<view class="goods-badge">{{index + 1}}</view>
					</view>
				</view>
			</scroll-view>

			<!-- è®¢å•ä¿¡æ¯åŒºåŸŸ -->
			<view class="order-detail">
				<view class="detail-row">
					<view class="detail-label">
						<text class="label-icon">ğŸ“…</text>
						<text>{{ $t.order.dateAdd }}</text>
					</view>
					<view class="detail-value">{{item.dateAdd}}</view>
				</view>
				<view class="detail-row">
					<view class="detail-label">
						<text class="label-icon">ğŸ”–</text>
						<text>{{ $t.order.orderNumber }}</text>
					</view>
					<view class="detail-value">{{item.orderNumber}}</view>
				</view>
			</view>

			<!-- ä»·æ ¼å’Œæ“ä½œåŒºåŸŸ -->
			<view class="order-footer">
				<view class="price-area">
					<text class="price-label">å®ä»˜é‡‘é¢</text>
					<view class="price-value">
						<text class="currency">Â¥</text>
						<text class="amount">{{item.amountReal}}</text>
					</view>
				</view>
				<view class="action-btns">
					<view wx:if="{{item.status > 0}}" class="order-btn btn-secondary" bindtap="callShop" data-shopid="{{item.shopIdZt}}">
						<text class="btn-icon">ğŸ“</text>
						<text>{{ $t.order.callShop }}</text>
					</view>
					<view wx:if="{{item.status== -1}}" class="order-btn btn-danger" bindtap="deleteOrder" data-id="{{item.id}}">
						<text class="btn-icon">ğŸ—‘</text>
						<text>{{ $t.order.deleteOrder }}</text>
					</view>
					<view wx:if="{{item.status== 0}}" class="order-btn btn-cancel" bindtap="cancelOrderTap" data-id="{{item.id}}">
						<text>{{ $t.order.cancelOrder }}</text>
					</view>
					<view wx:if="{{item.status== 0}}" class="order-btn btn-primary" bindtap="toPayTap" data-id="{{item.id}}" data-money="{{item.amountReal}}" data-score="{{item.score}}">
						<text class="btn-icon">ğŸ’³</text>
						<text>{{ $t.order.toPayTap }}</text>
					</view>
				</view>
			</view>
		</view>
	</view>
	
	<!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
	<view class="safeAreaOldMarginBttom safeAreaNewMarginBttom"></view>
</view>

<!-- æ”¯ä»˜ç»„ä»¶ -->
<payment
  money="{{ money }}"
  remark="{{ $t.payment.order }} ï¼š{{ orderId }}"
  nextAction="{{ nextAction }}"
  show="{{ paymentShow }}"
  bind:cancel="paymentCancel"
  bind:ok="paymentOk"
/>